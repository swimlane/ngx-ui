<div class="ngx-select-input-box-outer-wrap">
  <div
    [tabindex]="disabled ? -1 : tabindex"
    (keydown)="onKeyDown($event)"
    (keyup)="onGlobalKeyUp($event)"
    class="ngx-select-input-box"
    (click)="onClick()"
    (focus)="onFocus()"
    #inputContainer
    >
    @if (label) {
      <label class="ngx-select-label" [attr.for]="selectId">
        <span>{{ label }}</span>
        <span [innerHTML]="requiredIndicator"></span>
      </label>
    }
    @if (!selected?.length && placeholder) {
      <span class="ngx-select-placeholder" [innerHTML]="placeholder"> </span>
    }
    @if (tagging || selectedOptions?.length) {
      <ul
        class="horizontal-list ngx-select-input-list"
        [class.no-selections]="!selected?.length"
        >
        @for (option of selectedOptions; track option) {
          <li
            class="ngx-select-input-option"
            [class.disabled]="multiple && selectedOptions.length > 1 && option.disabled"
            >
            @if (option.inputTemplate) {
              <ng-template
                [ngTemplateOutlet]="option.inputTemplate"
                [ngTemplateOutletContext]="{ option: option }"
                >
              </ng-template>
            }
            @if (!option.inputTemplate) {
              <span class="ngx-select-input-name" [innerHTML]="option.name || option.value">
              </span>
            }
            @if (allowClear && (multiple || tagging) && !option.disabled) {
              <button
                type="button"
                title="Remove Selection"
                class="ngx-select-clear"
                (click)="onOptionRemove($event, option)"
                >
                <i class="ngx-icon ngx-x-small"></i>
              </button>
            }
          </li>
        }
        @if (tagging) {
          <li class="ngx-select-input-box-wrapper">
            <input
              #tagInput
              type="search"
              class="ngx-select-text-box"
              autocomplete="off"
              autocorrect="off"
              spellcheck="off"
              (keydown)="onInputKeyDown($event)"
              (keyup)="onInputKeyUp($event)"
              (change)="$event.stopPropagation()"
              (blur)="clearInput()"
              />
            @if (tagInput.value) {
              <button
                type="button"
                aria-label="Clear"
                class="ngx-select-clear-tagging-input"
                (click)="onClearTaggingInput($event)"
                >
                <i class="ngx-icon ngx-x-small"></i>
              </button>
            }
          </li>
        }
      </ul>
    }
  </div>
  @if (hasControls) {
    <div class="ngx-select-input-box__controls">
      @if (clearVisible) {
        <button
          type="button"
          title="Clear Selections"
          aria-label="Clear Selections"
          class="ngx-select-clear"
          (click)="onClear($event)"
          >
          <i class="ngx-icon ngx-x-small"></i>
        </button>
      }
      @if (caretVisible) {
        <button
          type="button"
          aria-label="Toggle Dropdown"
          class="ngx-select-caret"
          (click)="onToggle($event)"
          >
          @if (!selectCaret) {
            <i class="ngx-icon ngx-chevron-bold-down"></i>
          }
          @if (isNotTemplate) {
            <span [innerHTML]="selectCaret"> </span>
          } @else {
            <ng-container *ngTemplateOutlet="selectCaret"></ng-container>
          }
        </button>
      }
    </div>
  }
</div>
<div class="ngx-select-input-underline">
  <div class="underline-fill"></div>
</div>
<div class="ngx-select-hint" [ngClass]="{ hidden: !withHint }">
  @if (hint) {
    <span [innerHTML]="hint"></span>
  }
  <ng-content select="ngx-input-hint"></ng-content>
</div>
