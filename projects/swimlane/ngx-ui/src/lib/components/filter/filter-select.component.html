<div class="ngx-select-wrap">
  <div class="ngx-select-flex-wrap" [style.min-width]="autosize ? autosizeMinWidth : undefined">
    <div class="ngx-select-flex-wrap-inner">
      <div class="ngx-chip" (click)="onToggle()" [class.has-controls]="hasControls">
        <div class="ngx-chip__contents">
          <span *ngIf="label" class="ngx-chip-label"> {{ label }}: </span>

          <span class="ngx-chip-value">
            <span *ngIf="!value?.length">{{ placeholder }} </span>
            <span *ngIf="value?.length > 1">{{ value.length }} Selected</span>
            <span *ngIf="value?.length === 1" [innerHTML]="selection"></span>
          </span>
        </div>

        <div class="ngx-chip__controls" *ngIf="hasControls">
          <button
            type="button"
            *ngIf="clearVisible"
            title="Clear Selections"
            aria-label="Clear Selections"
            class="ngx-chip-clear"
            (click)="onClear($event)"
          >
            <i class="ngx-icon ngx-x"></i>
          </button>
          <button type="button" *ngIf="caretVisible" aria-label="Toggle Dropdown" class="ngx-chip-caret">
            <i class="ngx-icon ngx-chevron-bold-down"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <ngx-select-dropdown
    *ngIf="dropdownVisible"
    [focusIndex]="focusIndex"
    [filterQuery]="filterQuery"
    [filterPlaceholder]="filterPlaceholder"
    [filterCaseSensitive]="filterCaseSensitive"
    [allowAdditions]="false"
    [showSelectAll]="multiple && showSelectAll"
    [selected]="value"
    [groupBy]="groupBy"
    [groupByTemplate]="groupByTemplate"
    [emptyPlaceholder]="emptyPlaceholder"
    [tagging]="false"
    [filterEmptyPlaceholder]="filterEmptyPlaceholder"
    [filterable]="filterable"
    [identifier]="identifier"
    [options]="options"
    (keyup)="keyup.emit($event)"
    (close)="onClose()"
    (clearQueryFilter)="clearQueryFilter.emit()"
    (selection)="onDropdownSelection($event)"
    (selectAll)="onSelectAll()"
    (deselection)="onDropdownDeselection($event)"
    (keyboardSelection)="onDropdownSelection($event, false)"
    (keyboardDeselection)="onDropdownDeselection($event, false)"
  >
  </ngx-select-dropdown>
</div>
